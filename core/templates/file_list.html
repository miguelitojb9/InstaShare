{% extends 'base.html' %} {% load static %} {% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
  <h1><i class="fas fa-file-archive"></i> My Files</h1>
  <div>
    <a href="{% url 'upload' %}" class="btn btn-primary">
      <i class="fas fa-upload"></i> Upload File
    </a>
    <a class="btn btn-warning compress-btn" id="zipButton">
      <i class="fa-solid fa-file-zipper"></i> Zip All File
    </a>
  </div>
</div>

{% if files %}
<div class="table-responsive">
  <table class="table table-striped table-hover">
    <thead class="table-dark">
      <tr>
        <th>Name</th>
        <th>Size</th>
        <th>Status</th>
        <th>Uploaded</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for file in files %}
      <tr>
        <td>{{ file.display_name }}</td>
        <td>{{ file.get_file_size_mb|floatformat:2 }} MB</td>
        <td>
          <span
            class="badge {% if file.status == 'completed' %}bg-success {% elif file.status == 'processing' %}bg-warning {% elif file.status == 'failed' %}bg-danger {% else %}bg-secondary{% endif %}"
          >
            {{ file.get_status_display }}
          </span>
        </td>
        <td>{{ file.uploaded_at|date:"M d, Y H:i" }}</td>
        <td>
          <a
            href="{% url 'rename' file.id %}"
            class="btn btn-sm btn-outline-warning"
          >
            <i class="fas fa-edit "></i>
          </a>
          {% if file.status == 'completed' %}
          <a
            href="{% url 'download' file.id %}"
            class="btn btn-sm btn-outline-success"
          >
            <i class="fas fa-download"></i>
          </a>
          {% else %}
          <a
            href="#"
            class="btn btn-sm btn-outline-success"
          >
          <i class="fa-solid fa-file-zipper"></i>
            
          </a>
          {% endif %}
          <a
            href=""
            class="btn btn-sm btn-outline-danger"
          >
            <i class="fas fa-trash "></i>
          </a>
          
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% else %}
<div class="text-center py-5">
  <i class="fas fa-folder-open fa-4x text-muted mb-3"></i>
  <h3 class="text-muted">No files uploaded yet</h3>
  <p class="text-muted">Get started by uploading your first file</p>
  <a href="{% url 'upload' %}" class="btn btn-primary mt-2">
    <i class="fas fa-upload"></i> Upload File
  </a>
</div>
{% endif %} {% endblock %}
{% block extra_js %}
  <script src="{% static 'js/core.js' %}"></script>
{% endblock %}
